# 5. A05:2021-Security Misconfiguration

Ta kategoria obejmuje podatności wynikające z niewłaściwej konfiguracji zabezpieczeń na różnych poziomach aplikacji, co może prowadzić do potencjalnych zagrożeń bezpieczeństwa.

## Błąd nr 1 – Brak odpowiedniej konfiguracji nagłówków bezpieczeństwa

**Przykład:**  
W pliku `SecurityConfig.java` brak jest konfiguracji nagłówków HTTP, takich jak `Content-Security-Policy`, `X-Content-Type-Options` czy `X-Frame-Options`.

**Niebezpieczeństwa:**  
Brak tych nagłówków może umożliwić atakującym przeprowadzenie ataków typu clickjacking, MIME sniffing czy wstrzykiwanie złośliwego kodu, co może prowadzić do kradzieży danych użytkowników lub przejęcia kontroli nad aplikacją.

**Proponowane rozwiązanie:**  
Należy skonfigurować odpowiednie nagłówki HTTP w aplikacji. W przypadku korzystania z Spring Security można to zrobić, dodając odpowiednie ustawienia w klasie konfiguracyjnej:

```java
http
    .headers(headers -> headers
        .contentSecurityPolicy("default-src 'self'")
        .frameOptions(frameOptions -> frameOptions.sameOrigin())
        .xssProtection(xss -> xss.block(true))
        .contentTypeOptions(withDefaults())
    );
```

---

## Błąd nr 2 – Ujawnianie szczegółowych komunikatów błędów

**Przykład:**  
W pliku `GlobalExceptionHandler.java` metoda `handleAllExceptions` zwraca pełne komunikaty błędów do klienta.

**Niebezpieczeństwa:**  
Ujawnianie szczegółowych informacji o błędach może dostarczyć potencjalnym atakującym informacji o wewnętrznej strukturze aplikacji, co ułatwia przeprowadzenie ataków.

**Proponowane rozwiązanie:**  
Należy zwracać ogólne komunikaty błędów do użytkownika, a szczegółowe informacje logować po stronie serwera. Przykładowo:

```java
@ExceptionHandler(Exception.class)
public ResponseEntity<String> handleAllExceptions(Exception ex, WebRequest request) {
    logger.error("Wystąpił błąd: ", ex);
    return new ResponseEntity<>("Wystąpił błąd po stronie serwera. Proszę spróbować później.", HttpStatus.INTERNAL_SERVER_ERROR);
}
```

---

# 6. A06:2021-Vulnerable and Outdated Components

Ta kategoria dotyczy ryzyka związanego z używaniem podatnych lub przestarzałych komponentów i bibliotek, które mogą zawierać znane luki bezpieczeństwa.

## Błąd nr 3 – Używanie przestarzałych bibliotek frontendowych

**Przykład:**  
W pliku `package.json` zdefiniowano zależności do bibliotek, takich jak `react` w wersji `16.8.0` oraz `axios` w wersji `0.19.0`.

**Niebezpieczeństwa:**  
Stosowanie przestarzałych wersji bibliotek może narażać aplikację na znane podatności, które zostały już naprawione w nowszych wersjach.

**Proponowane rozwiązanie:**  
Należy regularnie aktualizować zależności do najnowszych stabilnych wersji. Można to zrobić, uruchamiając polecenie `npm outdated`, aby sprawdzić dostępność nowszych wersji, a następnie zaktualizować je za pomocą `npm update`.

---

## Błąd nr 4 – Brak zarządzania zależnościami w backendzie

**Przykład:**  
W projekcie brakuje pliku `build.gradle` lub `pom.xml`, co sugeruje brak systemu zarządzania zależnościami dla części backendowej.

**Niebezpieczeństwa:**  
Brak systemu zarządzania zależnościami utrudnia śledzenie i aktualizację używanych bibliotek, co może prowadzić do wykorzystania podatnych lub przestarzałych komponentów.

**Proponowane rozwiązanie:**  
Należy wprowadzić system zarządzania zależnościami, taki jak Maven lub Gradle, aby ułatwić kontrolę nad używanymi bibliotekami i ich wersjami. Pozwoli to na łatwiejsze aktualizacje oraz zapewni lepsze zarządzanie zależnościami w projekcie.

---

### **Podsumowanie**  
Aby zwiększyć bezpieczeństwo aplikacji, zaleca się wprowadzenie powyższych zmian oraz regularne przeglądy konfiguracji i używanych komponentów w celu identyfikacji i eliminacji potencjalnych podatności.

